<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · OkPkgTemplates.jl</title><meta name="title" content="- · OkPkgTemplates.jl"/><meta property="og:title" content="- · OkPkgTemplates.jl"/><meta property="twitter:title" content="- · OkPkgTemplates.jl"/><meta name="description" content="Documentation for OkPkgTemplates.jl."/><meta property="og:description" content="Documentation for OkPkgTemplates.jl."/><meta property="twitter:description" content="Documentation for OkPkgTemplates.jl."/><meta property="og:url" content="https://okatsn.github.io/OkPkgTemplates.jl/internal/"/><meta property="twitter:url" content="https://okatsn.github.io/OkPkgTemplates.jl/internal/"/><link rel="canonical" href="https://okatsn.github.io/OkPkgTemplates.jl/internal/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">OkPkgTemplates.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../extend/">Extend</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/main/docs/src/internal.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.commit_msg" href="#OkPkgTemplates.commit_msg"><code>OkPkgTemplates.commit_msg</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><strong>Notice</strong></p><p>Currently, you have to add</p><pre><code class="language-yaml hljs">    client-payload: &#39;{&quot;commit_msg&quot;: &quot;${{ github.event.commits[0].message }}&quot;}&#39;
</code></pre><p>in register.yml manually.</p><p><strong>In <code>register.yml</code>:</strong></p><p><code>with</code> Options for <code>name: Trigger next workflow</code>:</p><ul><li><code>client-payload:</code> passes data from Workflow 1 to Workflow 2<ul><li>Example:<pre><code class="nohighlight hljs">with:
  client-payload: &#39;{&quot;ref&quot;: &quot;${{ github.ref }}&quot;, &quot;sha&quot;: &quot;${{ github.sha }}&quot;}&#39;</code></pre></li><li>Commit message can be obtained from both<ul><li><code>${{ github.event.commits[0].message }}</code> and</li><li><code>${{ github.event.head_commit.message }}</code></li><li>(Not sure) the latter one could be empty</li><li>(Not sure) error with the latter one could result from permission: content: false</li><li>It is possible to <a href="https://github.com/orgs/community/discussions/35120">Iterating over github.event.commits</a> or <a href="https://github.com/orgs/community/discussions/25164">use join function to concatenate commits</a>.</li><li>Alternative way to <a href="https://docs.github.com/en/rest/git/commits?apiVersion=2022-11-28#get-a-commit">Get a commit</a> using <code>curl</code>.</li></ul></li><li>Also see <a href="https://docs.github.com/en/actions/learn-github-actions/contexts#github-context">github context</a> for what others are available.</li><li><strong>Noted that multiline string is not acceptable for json</strong>, you have to use e.g. &quot;# hello\n second line&quot; istead as the commit message where Project.toml version is raised.</li></ul></li></ul><p>Be aware if you have in several un-pushed commits that changes &#39;Project.toml&#39;, and push them at once, <code>&quot;commit_msg&quot;: &quot;${{ github.event.commits[0].message</code> will be the first commit and it is not necessarily the commit to be registered. UpdateOkReg register a version for this package at the latest commit being pushed.</p><p><strong>Notice</strong></p><p>As the latest commit you push is not necessary the commit you want to register, unexpected results will occurr if you push several commits among either of them &#39;Project.toml&#39; is modified.</p><p>For example:</p><ul><li>You have in several un-pushed commits that changes &#39;Project.toml&#39;, and push them at once, it register the version number of the lastest commit BUT <code>client_payload</code> (client-payload in <code>register.yml</code>) store and pass the information of the earliest commit in your push.</li><li>You add <code>[compat]</code> at the first commit with message &quot;Fix compatibility&quot;, and increase the version number with message &quot;New keyword args. <code>mkpath</code> for <code>mv2dir</code> ...&quot;. Both modify <code>Project.toml</code>, and the last one is registered but in release log it shows only &quot;Fix compatibility&quot;.</li></ul><p>If you want to automatically add commit message release note of the registered commit but you are too lazy to create pull requests since you are almost the only person working on <code>YourPackage</code>, please</p><ul><li>push everything else before you increase the version number, and</li><li>push only the <code>Project.toml</code> with commit message you&#39;d like to be adopted as release note.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/myokplugins.jl#L10-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.logfile_msg" href="#OkPkgTemplates.logfile_msg"><code>OkPkgTemplates.logfile_msg</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/myokplugins.jl#L52-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.TemplateIdentifier" href="#OkPkgTemplates.TemplateIdentifier"><code>OkPkgTemplates.TemplateIdentifier</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><strong>Create new template:</strong></p><p>Inside OkPkgTemplates/src,</p><ol><li>add concrete <code>struct</code> of <code>Type{&lt;:TemplateIdentifier}</code>.</li><li>add a new templating expression (optional)</li><li>add a new method <code>get_exprs</code> for <code>XXX</code></li></ol><pre><code class="language-julia hljs"># 1
struct XXX &lt;: TemplateIdentifier end

# 2
pkgtemplating_xxx(yourpkgname) = quote
    t = Template(;
        user=DEFAULT_USERNAME(),
        dir=DEFAULT_DESTINATION(),
        julia=DEFAULT_JULIAVER(),
        plugins=[
            Git(; manifest=false),
            PLUGIN_COMPATHELPER(),
            PLUGIN_GITHUBACTION(),
            Codecov(), # https://about.codecov.io/
            Documenter{GitHubActions}(),
            PkgTemplates.Readme(),
            PkgTemplates.TagBot(; changelog=tagbot_changelog()),
            PLUGIN_TEST(),
            RegisterAction()
        ]
    )

    t($yourpkgname)
end

# 3
get_exprs(::Type{XXX}) = [pkgtemplating_xxx, updateprojtoml_script]</code></pre><p><strong>Use the new template</strong></p><p>Generate: <code>genpkg(&quot;HelloMyPkg&quot;, XXX)</code></p><p>Update: <code>update(XXX)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/generate_actions.jl#L2-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.PLUGIN_REGISTER-Tuple{}" href="#OkPkgTemplates.PLUGIN_REGISTER-Tuple{}"><code>OkPkgTemplates.PLUGIN_REGISTER</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>PLUGIN_REGISTER()</code> by default uses templates in /home/runner/work/OkPkgTemplates.jl/OkPkgTemplates.jl/mypkgtemplates/for_okregistry/github/workflows/register.yml.</p><p>In the default template, job attempts to register the latest pushed commit of <code>YourPackage</code> where <code>Project.toml</code> is modified. If success, <code>TagBot.yml</code> will be triggered. See also <code>PLUGIN_TAGBOT</code>.</p><p>If <code>Project.toml</code> is modified but version number unchanged, it simply failed and you don&#39;t have to worry about anything.</p><p><strong>Known issue</strong></p><p>According to the default &quot;register.yml&quot;, in the workflow &quot;Register Package to OkRegistry&quot; both the repo of <code>YourPackage</code> and <code>OkRegistry</code> is checked out, and register <code>YourPackage</code> to <code>OkRegistry</code> using PAT <code>ACCESS_OKREGISTRY</code> token that must be provided in advance via your Github account. By default,  <a href="https://github.com/actions/checkout">actions/checkout</a> checkout the commit of the pushed event.</p><p>After the current version is successfully registerd, TagBot will be triggered. However, if there is something wrong in tagging the previous version, that is a version exists in OkRegistry but failed to be tagged with TagBot, TagBot will stop at that version; and thus, succeeding versions cannot be tagged. See README for trouble shooting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/myokplugins.jl#L127-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.PLUGIN_TAGBOT-Tuple{}" href="#OkPkgTemplates.PLUGIN_TAGBOT-Tuple{}"><code>OkPkgTemplates.PLUGIN_TAGBOT</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>PLUGIN_TAGBOT()</code> returns an <code>PkgTemplates.TagBot</code>. You can redefine this function.</p><p>By default it add <code>github.event.client_payload.logfile_msg</code> as part of the release note. Please must read <strong>Known issue</strong> in the doc of <code>PLUGIN_REGISTER()</code>.</p><p><strong>Changelog</strong></p><p>For variables that you can use in the changelog template, see <a href="https://github.com/JuliaRegistries/TagBot/blob/afbc9c3f5dc23047ea6e187f2cb1a3ac7d1fbbeb/tagbot/action/changelog.py">line 174-184, tagbot/action/changelog.py</a> and <a href="https://github.com/JuliaRegistries/TagBot#changelogs">TagBot/Changelogs</a>. Which are</p><ul><li>&quot;compare_url&quot;</li><li>&quot;custom&quot;</li><li>&quot;issues&quot;</li><li>&quot;package&quot;</li><li>&quot;previous_release&quot;</li><li>&quot;pulls&quot;</li><li>&quot;sha&quot;</li><li>&quot;version&quot;</li><li>&quot;version_url&quot;</li></ul><p>Also see</p><ul><li><a href="https://github.com/JuliaRegistries/TagBot/blob/master/action.yml">Default changelog template</a>.</li></ul><p><strong>More information</strong></p><ul><li>see <a href="https://github.com/JuliaCI/PkgTemplates.jl/blob/master/src/plugins/tagbot.jl">PkgTemplates/src/plugins/tagbot.jl</a>.</li><li>If your registry is public, you don&#39;t need to provide token. For more information, see <a href="https://github.com/JuliaRegistries/TagBot#custom-registries">here</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/myokplugins.jl#L89-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.copymyfiles_script-Tuple{Any}" href="#OkPkgTemplates.copymyfiles_script-Tuple{Any}"><code>OkPkgTemplates.copymyfiles_script</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Copy some files from <code>repo0</code> to <code>repo1</code>. List of files:</p><ul><li>All files under <code>.github/workflows</code></li><li></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/common_use.jl#L80-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.generate-Tuple" href="#OkPkgTemplates.generate-Tuple"><code>OkPkgTemplates.generate</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>generate(args...)</code> evaluate the <em>expressions</em> returned by <code>genpkg</code>, and it takes exactly the same argument as <code>genpkg</code>.</p><p><strong>Example</strong></p><p>Generate julia package at <code>./MyNewProject</code></p><pre><code class="language-julia hljs">generate(&quot;MyNewProject&quot;, GeneralReg)</code></pre><p>Generate julia package at <code>.julia/dev/MyNewProject</code></p><pre><code class="language-julia hljs">using Pkg
OkPkgTemplates.DEFAULT_DESTINATION() = Pkg.devdir()
generate(&quot;MyNewProject&quot;, OkReg)</code></pre><div class="admonition is-warning"><header class="admonition-header">Don&#39;t do this</header><div class="admonition-body"><pre><code class="language-julia hljs">generate(joinpath(Pkg.devdir(), &quot;MolchanCB&quot;), OkReg)</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/interface.jl#L52-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.genpkg-Tuple{Any, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.genpkg-Tuple{Any, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.genpkg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>genpkg(yourpkgname, tp::Type{&lt;:TemplateIdentifier})</code> call <code>@chkdest</code>, and fall back to <code>genpkg(yourpkgname, get_exprs(tp)...)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/generate_actions.jl#L91-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.genpkg-Tuple{Any, Vararg{Function}}" href="#OkPkgTemplates.genpkg-Tuple{Any, Vararg{Function}}"><code>OkPkgTemplates.genpkg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>genpkg(yourpkgname::String, fs...)</code> execute scripts <code>fs</code> one by one in user&#39;s scope using <code>OkPkgTemplates</code>&#39;s utilities.</p><p>Please define <code>OkPkgTemplates.DEFAULT_**</code> for changing defaults.</p><ul><li>If <code>OkPkgTemplates.DEFAULT_DESTINATION()</code> is not defined, it is defined as <code>Pkg.devdir()</code> at user&#39;s scope in the first use.</li></ul><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>In julia REPL,</p><ul><li>key in <code>OkPkgTemplates.DEFAULT_</code> and [tab] to list all functions that returns default variables</li><li>key in <code>OkPkgTemplates.PLUGIN_</code> and [tab] to list all functions that returns <code>::PkgTemplates.Plugin</code> presets.</li><li>Redefine these functions in the local scope to assign the variable.</li></ul></div></div><p><strong>Example</strong></p><p>To specify output destination, redefine <code>DEFAULT_DESTINATION()</code></p><pre><code class="nohighlight hljs">OkPkgTemplates.DEFAULT_DESTINATION() = pwd()</code></pre><p>and then generate the Package</p><pre><code class="language-julia hljs">t = genpkg(&quot;MyNewProject&quot;, GeneralReg)
OkPkgTemplates.eval(t)</code></pre><div class="admonition is-success"><header class="admonition-header">Resource</header><div class="admonition-body"><ul><li><a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#Saving-Templates-1">PkgTemplates/Saving-Templates</a>:</li><li><code>PkgTemplates.user_view</code>: <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#Extending-Existing-Plugins-1">Extending-Existing-Plugins</a></li></ul></div></div><p><strong>Also see the helps</strong></p><ul><li><code>copymyfiles_script</code></li><li><code>updateprojtoml_script</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/generate_actions.jl#L50-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.get_exprs-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.get_exprs-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.get_exprs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/generate_actions.jl#L98-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.mypkgtemplate_dir-Tuple{Vararg{AbstractString}}" href="#OkPkgTemplates.mypkgtemplate_dir-Tuple{Vararg{AbstractString}}"><code>OkPkgTemplates.mypkgtemplate_dir</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Return a path relative to the default template file directory (<code>OkPkgTemplates/mypkgtemplates</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/mypkgtemplates.jl#L7-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.pkgtemplating_gereg-Tuple{Any}" href="#OkPkgTemplates.pkgtemplating_gereg-Tuple{Any}"><code>OkPkgTemplates.pkgtemplating_gereg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>pkgtemplating_gereg(yourpkgname)</code> returns the script of <code>PkgTemplates</code> (<code>quote ... end</code>) for general registry.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/templates/template_gereg.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.pkgtemplating_okreg-Tuple{Any}" href="#OkPkgTemplates.pkgtemplating_okreg-Tuple{Any}"><code>OkPkgTemplates.pkgtemplating_okreg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>pkgtemplating_okreg(yourpkgname)</code> returns the script of <code>PkgTemplates</code> (<code>quote ... end</code>) to be executed at the scope that the macro is called.</p><p>It</p><ul><li>creates a package using <code>PkgTemplates.Templates</code></li><li><code>add Documenter, CompatHelperLocal, Test</code> into <code>Project.toml</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/templates/template_okreg.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.stringscore-Tuple{Any}" href="#OkPkgTemplates.stringscore-Tuple{Any}"><code>OkPkgTemplates.stringscore</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>stringscore(str)</code> gives an absolute score for a string; the order of score from large to small corresponds to the alphabetical order. For a string less than 100 characters, the score should not exceeds one.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; stringscore.([&quot;AAA&quot;, &quot;Aa&quot;, &quot;BCD&quot;])
3-element Vector{Float64}:
 0.0656565
 0.06597
 0.06667680000000001</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/stringscore.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.upactions-Tuple{Any, Any, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.upactions-Tuple{Any, Any, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.upactions</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>upactions(mod::Module, TI::Type{&lt;:TemplateIdentifier})</code> return expressions for updating CIs, referencing the path of <code>mod</code>.</p><p><strong>Example</strong></p><pre><code class="nohighlight hljs">using MyPkgWhereCIToBeUpdated
exprs = upactions($MyPkgWhereCIToBeUpdated $GeneralReg)
for ex in exprs
    @eval(OkPkgTemplates, $ex)
end</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><ul><li>Make sure all your action files (all the files in <code>.github/workflows</code>) is under the control of git for safety.</li></ul></div></div><p><strong>Also see the helps</strong></p><ul><li><code>copymyfiles_script</code></li><li><code>updateprojtoml_script</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/update_actions.jl#L3-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.upactions-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.upactions-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.upactions</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>upactions</code> return expressions for updating CIs using <code>upactions</code> referencing the path of the current activated project environment.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/update_actions.jl#L66-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.update-Tuple" href="#OkPkgTemplates.update-Tuple"><code>OkPkgTemplates.update</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Overwrite/Update Github actions of the repository of the julia package in development; make sure the pacakge is under version control that the process can be reverted.</p><p><strong>Example</strong></p><p>Activate environment <code>OkPkgTemplates</code>:</p><pre><code class="language-pkg-repl hljs">pkg&gt; activate .
(OkPkgTemplates) pkg&gt; dev OkFiles
    Resolving package versions...
    Updating `~/.julia/dev/OkPkgTemplates/Project.toml`
    [b25a35d4] + OkFiles v0.4.1 `~/.julia/dev/OkFiles`
    Updating `~/.julia/dev/OkPkgTemplates/Manifest.toml`
    [b25a35d4] + OkFiles v0.4.1 `~/.julia/dev/OkFiles`</code></pre><p>Update CIs in <code>OkFiles</code>:</p><pre><code class="language-julia hljs">julia&gt; using OkPkgTemplates, OkFiles
julia&gt; update(OkFiles, GeneralReg)</code></pre><p><code>update</code> execute expressions returned by <code>upactions</code> one-by-one.</p><p>Running <code>update</code> overwrite/update Github actions of the repository of the currently activated julia package; make sure they are under version control that the process can be reverted.</p><p><strong>Example</strong></p><p>Activate environment <code>OkPkgTemplates</code>:</p><pre><code class="language-pkg-repl hljs">pkg&gt; activate .
(OkPkgTemplates) pkg&gt;</code></pre><p>Update CIs in <code>OkPkgTemplates</code>:</p><pre><code class="language-julia hljs">julia&gt; using OkPkgTemplates
julia&gt; update(GeneralReg)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/interface.jl#L1-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.updateprojtoml_script-Tuple{Any}" href="#OkPkgTemplates.updateprojtoml_script-Tuple{Any}"><code>OkPkgTemplates.updateprojtoml_script</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>After making the template successfully, add <code>&quot;Documenter&quot;, &quot;CompatHelperLocal&quot;</code> to <code>[extras]</code> and <code>[targets]</code> as <code>runtests.jl</code> (may) use them.</p><p><code>updateprojtoml_script(yourpkgname)</code> <em>creates expressions</em> in which <code>projtoml_path = joinpath(OkPkgTemplates.DEFAULT_DESTINATION(), yourpkgname, &quot;Project.toml&quot;)</code>.</p><p>It modify <code>Project.toml</code> by add [extras] and [targets] for the scope of Test.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/common_use.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OkPkgTemplates.@chkdest-Tuple{}" href="#OkPkgTemplates.@chkdest-Tuple{}"><code>OkPkgTemplates.@chkdest</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>@chkdest</code> check whether <code>OkPkgTemplates.DEFAULT_DESTINATION()</code> is defined. It define <code>OkPkgTemplates.DEFAULT_DESTINATION() = Pkg.devdir()</code> if <code>DEFAULT_DESTINATION()</code> is empty.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/350bf7462b035dc2aa16ea6e19915f76986d6b06/src/mypkgtemplates.jl#L19-L22">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Friday 25 April 2025 00:33">Friday 25 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
