<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · OkPkgTemplates.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://okatsn.github.io/OkPkgTemplates.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>OkPkgTemplates.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li><li><a class="tocitem" href="extend/">Extend</a></li><li><span class="tocitem">Keynote</span><ul><li><a class="tocitem" href="sayhello/">Macro call explained</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="OkPkgTemplates"><a class="docs-heading-anchor" href="#OkPkgTemplates">OkPkgTemplates</a><a id="OkPkgTemplates-1"></a><a class="docs-heading-anchor-permalink" href="#OkPkgTemplates" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/okatsn/OkPkgTemplates.jl">OkPkgTemplates</a>.</p><ul><li><a href="#OkPkgTemplates.commit_msg"><code>OkPkgTemplates.commit_msg</code></a></li><li><a href="#OkPkgTemplates.logfile_msg"><code>OkPkgTemplates.logfile_msg</code></a></li><li><a href="extend/#OkPkgTemplates.TemplateIdentifier"><code>OkPkgTemplates.TemplateIdentifier</code></a></li><li><a href="#OkPkgTemplates.PLUGIN_REGISTER-Tuple{}"><code>OkPkgTemplates.PLUGIN_REGISTER</code></a></li><li><a href="#OkPkgTemplates.PLUGIN_TAGBOT-Tuple{}"><code>OkPkgTemplates.PLUGIN_TAGBOT</code></a></li><li><a href="#OkPkgTemplates.chkdest-Tuple{}"><code>OkPkgTemplates.chkdest</code></a></li><li><a href="#OkPkgTemplates.copymyfiles_script-Tuple{Any, Any}"><code>OkPkgTemplates.copymyfiles_script</code></a></li><li><a href="extend/#OkPkgTemplates.genpkg"><code>OkPkgTemplates.genpkg</code></a></li><li><a href="#OkPkgTemplates.genpkg-Tuple{Any, Any, Vararg{Any}}"><code>OkPkgTemplates.genpkg</code></a></li><li><a href="#OkPkgTemplates.mypkgtemplate_dir-Tuple{Vararg{AbstractString}}"><code>OkPkgTemplates.mypkgtemplate_dir</code></a></li><li><a href="#OkPkgTemplates.pkgtemplating_gereg-Tuple{Any, Any}"><code>OkPkgTemplates.pkgtemplating_gereg</code></a></li><li><a href="#OkPkgTemplates.pkgtemplating_okreg-Tuple{Any, Any}"><code>OkPkgTemplates.pkgtemplating_okreg</code></a></li><li><a href="sayhello/#OkPkgTemplates.sayhello3"><code>OkPkgTemplates.sayhello3</code></a></li><li><a href="#OkPkgTemplates.sayhello3-Tuple{Any}"><code>OkPkgTemplates.sayhello3</code></a></li><li><a href="#OkPkgTemplates.stringscore-Tuple{Any}"><code>OkPkgTemplates.stringscore</code></a></li><li><a href="#OkPkgTemplates.upactions-Tuple{String, String, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.upactions</code></a></li><li><a href="#OkPkgTemplates.updateprojtoml_script-Tuple{Any, Any}"><code>OkPkgTemplates.updateprojtoml_script</code></a></li><li><a href="sayhello/#OkPkgTemplates.@sayhello3"><code>OkPkgTemplates.@sayhello3</code></a></li><li><a href="#OkPkgTemplates.@sayhello3-Tuple{String}"><code>OkPkgTemplates.@sayhello3</code></a></li><li><a href="#OkPkgTemplates.@sayhello3-Tuple{Symbol}"><code>OkPkgTemplates.@sayhello3</code></a></li><li><a href="#OkPkgTemplates.@sayhello3-Tuple{Expr}"><code>OkPkgTemplates.@sayhello3</code></a></li><li><a href="#OkPkgTemplates.@upactions-Tuple{Module, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.@upactions</code></a></li><li><a href="#OkPkgTemplates.@upactions-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.@upactions</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.commit_msg" href="#OkPkgTemplates.commit_msg"><code>OkPkgTemplates.commit_msg</code></a> — <span class="docstring-category">Constant</span></header><section><div><p><strong>Notice</strong></p><p>Currently, you have to add</p><pre><code class="language-yaml hljs">    client-payload: &#39;{&quot;commit_msg&quot;: &quot;${{ github.event.commits[0].message }}&quot;}&#39;
</code></pre><p>in register.yml manually.</p><p><strong>In <code>register.yml</code>:</strong></p><p><code>with</code> Options for <code>name: Trigger next workflow</code>:</p><ul><li><code>client-payload:</code> passes data from Workflow 1 to Workflow 2<ul><li>Example:<pre><code class="nohighlight hljs">with:
  client-payload: &#39;{&quot;ref&quot;: &quot;${{ github.ref }}&quot;, &quot;sha&quot;: &quot;${{ github.sha }}&quot;}&#39;</code></pre></li><li>Commit message can be obtained from both<ul><li><code>${{ github.event.commits[0].message }}</code> and</li><li><code>${{ github.event.head_commit.message }}</code></li><li>(Not sure) the latter one could be empty</li><li>(Not sure) error with the latter one could result from permission: content: false</li><li>It is possible to <a href="https://github.com/orgs/community/discussions/35120">Iterating over github.event.commits</a> or <a href="https://github.com/orgs/community/discussions/25164">use join function to concatenate commits</a>.</li><li>Alternative way to <a href="https://docs.github.com/en/rest/git/commits?apiVersion=2022-11-28#get-a-commit">Get a commit</a> using <code>curl</code>.</li></ul></li><li>Also see <a href="https://docs.github.com/en/actions/learn-github-actions/contexts#github-context">github context</a> for what others are available.</li><li><strong>Noted that multiline string is not acceptable for json</strong>, you have to use e.g. &quot;# hello\n second line&quot; istead as the commit message where Project.toml version is raised.</li></ul></li></ul><p>Be aware if you have in several un-pushed commits that changes &#39;Project.toml&#39;, and push them at once, <code>&quot;commit_msg&quot;: &quot;${{ github.event.commits[0].message</code> will be the first commit and it is not necessarily the commit to be registered. UpdateOkReg register a version for this package at the latest commit being pushed.</p><p><strong>Notice</strong></p><p>As the latest commit you push is not necessary the commit you want to register, unexpected results will occurr if you push several commits among either of them &#39;Project.toml&#39; is modified.</p><p>For example:</p><ul><li>You have in several un-pushed commits that changes &#39;Project.toml&#39;, and push them at once, it register the version number of the lastest commit BUT <code>client_payload</code> (client-payload in <code>register.yml</code>) store and pass the information of the earliest commit in your push.</li><li>You add <code>[compat]</code> at the first commit with message &quot;Fix compatibility&quot;, and increase the version number with message &quot;New keyword args. <code>mkpath</code> for <code>mv2dir</code> ...&quot;. Both modify <code>Project.toml</code>, and the last one is registered but in release log it shows only &quot;Fix compatibility&quot;.</li></ul><p>If you want to automatically add commit message release note of the registered commit but you are too lazy to create pull requests since you are almost the only person working on <code>YourPackage</code>, please</p><ul><li>push everything else before you increase the version number, and</li><li>push only the <code>Project.toml</code> with commit message you&#39;d like to be adopted as release note.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/myokplugins.jl#L10-L49">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.logfile_msg" href="#OkPkgTemplates.logfile_msg"><code>OkPkgTemplates.logfile_msg</code></a> — <span class="docstring-category">Constant</span></header><section><div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/myokplugins.jl#L52-L54">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.PLUGIN_REGISTER-Tuple{}" href="#OkPkgTemplates.PLUGIN_REGISTER-Tuple{}"><code>OkPkgTemplates.PLUGIN_REGISTER</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>PLUGIN_REGISTER()</code> by default uses templates in /home/runner/work/OkPkgTemplates.jl/OkPkgTemplates.jl/mypkgtemplates/for_okregistry/github/workflows/register.yml.</p><p>In the default template, job attempts to register the latest pushed commit of <code>YourPackage</code> where <code>Project.toml</code> is modified. If success, <code>TagBot.yml</code> will be triggered. See also <code>PLUGIN_TAGBOT</code>.</p><p>If <code>Project.toml</code> is modified but version number unchanged, it simply failed and you don&#39;t have to worry about anything.</p><p><strong>Known issue</strong></p><p>According to the default &quot;register.yml&quot;, in the workflow &quot;Register Package to OkRegistry&quot; both the repo of <code>YourPackage</code> and <code>OkRegistry</code> is checked out, and register <code>YourPackage</code> to <code>OkRegistry</code> using PAT <code>ACCESS_OKREGISTRY</code> token that must be provided in advance via your Github account. By default,  <a href="https://github.com/actions/checkout">actions/checkout</a> checkout the commit of the pushed event.</p><p>After the current version is successfully registerd, TagBot will be triggered. However, if there is something wrong in tagging the previous version, that is a version exists in OkRegistry but failed to be tagged with TagBot, TagBot will stop at that version; and thus, succeeding versions cannot be tagged. See README for trouble shooting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/myokplugins.jl#L123-L134">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.PLUGIN_TAGBOT-Tuple{}" href="#OkPkgTemplates.PLUGIN_TAGBOT-Tuple{}"><code>OkPkgTemplates.PLUGIN_TAGBOT</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>PLUGIN_TAGBOT()</code> returns an <code>PkgTemplates.TagBot</code>. You can redefine this function.</p><p>By default it add <code>github.event.client_payload.logfile_msg</code> as part of the release note. Please must read <strong>Known issue</strong> in the doc of <code>PLUGIN_REGISTER()</code>.</p><p><strong>Changelog</strong></p><p>For variables that you can use in the changelog template, see <a href="https://github.com/JuliaRegistries/TagBot/blob/afbc9c3f5dc23047ea6e187f2cb1a3ac7d1fbbeb/tagbot/action/changelog.py">line 174-184, tagbot/action/changelog.py</a> and <a href="https://github.com/JuliaRegistries/TagBot#changelogs">TagBot/Changelogs</a>. Which are</p><ul><li>&quot;compare_url&quot;</li><li>&quot;custom&quot;</li><li>&quot;issues&quot;</li><li>&quot;package&quot;</li><li>&quot;previous_release&quot;</li><li>&quot;pulls&quot;</li><li>&quot;sha&quot;</li><li>&quot;version&quot;</li><li>&quot;version_url&quot;</li></ul><p>Also see</p><ul><li><a href="https://github.com/JuliaRegistries/TagBot/blob/master/action.yml">Default changelog template</a>.</li></ul><p><strong>More information</strong></p><ul><li>see <a href="https://github.com/JuliaCI/PkgTemplates.jl/blob/master/src/plugins/tagbot.jl">PkgTemplates/src/plugins/tagbot.jl</a>.</li><li>If your registry is public, you don&#39;t need to provide token. For more information, see <a href="https://github.com/JuliaRegistries/TagBot#custom-registries">here</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/myokplugins.jl#L85-L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.chkdest-Tuple{}" href="#OkPkgTemplates.chkdest-Tuple{}"><code>OkPkgTemplates.chkdest</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>chkdest()</code> return <code>Pkg.devdir()</code> if <code>DEFAULT_DESTINATION()</code> is empty.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/mypkgtemplates.jl#L13-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.copymyfiles_script-Tuple{Any, Any}" href="#OkPkgTemplates.copymyfiles_script-Tuple{Any, Any}"><code>OkPkgTemplates.copymyfiles_script</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Copy some files from <code>repo0</code> to <code>repo1</code>. List of files:</p><ul><li>All files under <code>.github/workflows</code></li><li></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/generalgenpkg.jl#L171-L176">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.genpkg-Tuple{Any, Any, Vararg{Any}}" href="#OkPkgTemplates.genpkg-Tuple{Any, Any, Vararg{Any}}"><code>OkPkgTemplates.genpkg</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>genpkg(yourpkgname::String, fs...)</code> execute scripts <code>fs</code> one by one in user&#39;s scope using <code>OkPkgTemplates</code>&#39;s utilities.</p><p>Please define <code>OkPkgTemplates.DEFAULT_**</code> for changing defaults.</p><ul><li>If <code>OkPkgTemplates.DEFAULT_DESTINATION()</code> returns an empty string, it use <code>Pkg.devdir()</code> at user&#39;s scope.</li></ul><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>In julia REPL,</p><ul><li>key in <code>OkPkgTemplates.DEFAULT_</code> and [tab] to list all functions that returns default variables</li><li>key in <code>OkPkgTemplates.PLUGIN_</code> and [tab] to list all functions that returns <code>::PkgTemplates.Plugin</code> presets.</li><li>Redefine these functions in the local scope to assign the variable.</li></ul></div></div><p><strong>Example</strong></p><p>To specify output destination, redefine <code>DEFAULT_DESTINATION()</code></p><pre><code class="language-julia hljs">OkPkgTemplates.DEFAULT_DESTINATION() = pwd()</code></pre><p>and then generate the Package</p><pre><code class="language-julia hljs">@genpkg &quot;MyNewProject&quot; OkReg</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><ul><li>Feel free to redefine <code>OkPkgTemplates.DEFAULT_...</code></li></ul></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>In the following cases, write a new macro of your own referencing <code>@genpkg</code> instead, or just use <code>PkgTemplates</code> <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#Saving-Templates-1">as instructed</a>:</p><ul><li>If you have the thought to redefine <code>OkPkgTemplates.PLUGIN_...</code></li><li>If you want to set <code>PkgTemplates.user_view</code> <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/#Extending-Existing-Plugins-1">(for example)</a></li></ul></div></div><p><strong>Also see the helps</strong></p><ul><li><code>copymyfiles_script</code></li><li><code>updateprojtoml_script</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/generalgenpkg.jl#L44-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.mypkgtemplate_dir-Tuple{Vararg{AbstractString}}" href="#OkPkgTemplates.mypkgtemplate_dir-Tuple{Vararg{AbstractString}}"><code>OkPkgTemplates.mypkgtemplate_dir</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Return a path relative to the default template file directory (<code>OkPkgTemplates/mypkgtemplates</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/mypkgtemplates.jl#L7-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.pkgtemplating_gereg-Tuple{Any, Any}" href="#OkPkgTemplates.pkgtemplating_gereg-Tuple{Any, Any}"><code>OkPkgTemplates.pkgtemplating_gereg</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>pkgtemplating_gereg(dest, yourpkgname)</code> returns the script of <code>PkgTemplates</code> (<code>quote ... end</code>) for general registry.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/templates/template_gereg.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.pkgtemplating_okreg-Tuple{Any, Any}" href="#OkPkgTemplates.pkgtemplating_okreg-Tuple{Any, Any}"><code>OkPkgTemplates.pkgtemplating_okreg</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>pkgtemplating_okreg(dest, yourpkgname)</code> returns the script of <code>PkgTemplates</code> (<code>quote ... end</code>) to be executed at the scope that the macro is called.</p><p>It</p><ul><li>creates a package using <code>PkgTemplates.Templates</code></li><li><code>add Documenter, CompatHelperLocal, Test</code> into <code>Project.toml</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/templates/template_okreg.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.sayhello3-Tuple{Any}" href="#OkPkgTemplates.sayhello3-Tuple{Any}"><code>OkPkgTemplates.sayhello3</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>sayhello3(name) = &quot;Hello world! $name&quot;</code>, an example to understand metaprogramming.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/sayhello.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.stringscore-Tuple{Any}" href="#OkPkgTemplates.stringscore-Tuple{Any}"><code>OkPkgTemplates.stringscore</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>stringscore(str)</code> gives an absolute score for a string; the order of score from large to small corresponds to the alphabetical order. For a string less than 100 characters, the score should not exceeds one.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; stringscore.([&quot;AAA&quot;, &quot;Aa&quot;, &quot;BCD&quot;])
3-element Vector{Float64}:
 0.0656565
 0.06597
 0.06667680000000001</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/stringscore.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.upactions-Tuple{String, String, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.upactions-Tuple{String, String, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.upactions</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>upactions(pwd1::String, pkgname::String, TI::Type{&lt;:TemplateIdentifier})</code> return expression for replacing Github Actions (all the files in <code>.github/workflows</code>) with the latest version that generated from <code>OkPkgTemplates</code>.</p><p>This function is separated for test purpose. For user, please use <code>@upactions</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">ex = OkPkgTemplates.upactions(dir_targetfolder(), pkgname2build)
@eval(OkPkgTemplates, $ex) # expression must be evaluated under the scope of OkPkgTemplates; otherwise, error will occur since the current scope might not have pakage required in `ex`.</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><ul><li>Make sure all your action files (all the files in <code>.github/workflows</code>) is under the control of git for safety.</li></ul></div></div><p><strong>Also see the helps</strong></p><ul><li><code>copymyfiles_script</code></li><li><code>updateprojtoml_script</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/generatepkg.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.updateprojtoml_script-Tuple{Any, Any}" href="#OkPkgTemplates.updateprojtoml_script-Tuple{Any, Any}"><code>OkPkgTemplates.updateprojtoml_script</code></a> — <span class="docstring-category">Method</span></header><section><div><p>After making the template successfully, add <code>&quot;Documenter&quot;, &quot;CompatHelperLocal&quot;</code> to <code>[extras]</code> and <code>[targets]</code> as <code>runtests.jl</code> (may) use them.</p><p><code>updateprojtoml_script(dest, yourpkgname)</code> creates script that <code>projtoml_path = joinpath(dest, yourpkgname, &quot;Project.toml&quot;)</code> will be modified on execution.</p><p>It modify <code>Project.toml</code> by add [extras] and [targets] for the scope of Test.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/generalgenpkg.jl#L93-L101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.@sayhello3-Tuple{Expr}" href="#OkPkgTemplates.@sayhello3-Tuple{Expr}"><code>OkPkgTemplates.@sayhello3</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">macro sayhello3(ex::Expr)
    return Expr(:block, :(sayhello3($(last(ex.args)))))
end</code></pre><p><strong>Example: variable <code>name</code> is not defined in macro&#39;s scope</strong></p><pre><code class="language-julia hljs">name = &quot;Bruce Willey&quot;

# output
&quot;Bruce Willey&quot;</code></pre><pre><code class="language-julia-repl hljs">julia&gt; OkPkgTemplates.@sayhello3 $name
ERROR: UndefVarError: `name` not defined</code></pre><div class="admonition is-success"><header class="admonition-header">Explain</header><div class="admonition-body"><ul><li><code>name</code> is passed as expression in this case, and it is not defined since macro dispatch is not based on the AST evaluated at runtime. Thus an error of <code>UndefVarError</code> is raised.</li><li>See <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/#Macros-and-dispatch">Macros and dispatch</a> for more information.</li></ul></div></div><p><strong>Example: a creative application</strong></p><pre><code class="language-julia hljs">OkPkgTemplates.@sayhello3 name = &quot;Bruce Willey&quot;

# output
&quot;Hello world! Bruce Willey&quot;</code></pre><div class="admonition is-success"><header class="admonition-header">Explain</header><div class="admonition-body"><p>In this example, the last argument of the expression <code>name = &quot;Bruce Willey&quot;</code> is &quot;Bruce Willey&quot;.</p></div></div><p><strong>Example 3: Use <code>@eval</code> if you want <code>name</code> be evaluated</strong></p><pre><code class="language-julia hljs">@eval OkPkgTemplates.@sayhello3 $name

# output
&quot;Hello world! Bruce Willey&quot;</code></pre><div class="admonition is-success"><header class="admonition-header">Explain</header><div class="admonition-body"><ul><li><code>@eval</code> evalute the expression <code>@sayhello3 $name</code> at runtime.</li><li>Thus, the argument for <code>@sayhello3</code> is evaluated as <code>String</code>, and <code>@sayhello3(str::String)</code> is the dispatched method.</li></ul></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/sayhello.jl#L30-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.@sayhello3-Tuple{String}" href="#OkPkgTemplates.@sayhello3-Tuple{String}"><code>OkPkgTemplates.@sayhello3</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">macro sayhello3(str::String)
    return Expr(:block, :(sayhello3($str)))
end</code></pre><p><strong>Example</strong></p><pre><code class="language-julia hljs">OkPkgTemplates.@sayhello3 &quot;Bruce Willey&quot;

# output
&quot;Hello world! Bruce Willey&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/sayhello.jl#L10-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.@sayhello3-Tuple{Symbol}" href="#OkPkgTemplates.@sayhello3-Tuple{Symbol}"><code>OkPkgTemplates.@sayhello3</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">macro sayhello3(symb::Symbol)
    return Expr(:block, :(sayhello3($(string(symb)))))
end</code></pre><p><strong>Example: A single the runtime variable is rendered as <code>Symbol</code></strong></p><pre><code class="language-julia hljs">name = &quot;Bruce Willey&quot;
OkPkgTemplates.@sayhello3 name

# output
&quot;Hello world! name&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/sayhello.jl#L88-L103">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.@upactions-Tuple{Module, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.@upactions-Tuple{Module, Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.@upactions</code></a> — <span class="docstring-category">Macro</span></header><section><div><p><code>@upactions(mod::Module, TI::Type{&lt;:TemplateIdentifier})</code> update CIs using <code>upactions</code> referencing the path of <code>mod</code>. See <code>upactions</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using MyPkgWhereCIToBeUpdated
@eval @upactions $MyPkgWhereCIToBeUpdated $GeneralReg
# execute `@upactions` whth `GeneralReg` evaluated as `Type{&lt;:TemplateIdentifier}` and `MyPkgWhereCIToBeUpdated` evaluated as `Module`.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/generatepkg.jl#L38-L47">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OkPkgTemplates.@upactions-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}" href="#OkPkgTemplates.@upactions-Tuple{Type{&lt;:OkPkgTemplates.TemplateIdentifier}}"><code>OkPkgTemplates.@upactions</code></a> — <span class="docstring-category">Macro</span></header><section><div><p><code>@upactions</code> update CIs using <code>upactions</code> referencing the path of the current activated project environment. See <code>upactions</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">@eval @upactions $GeneralReg
# execute `@upactions` whth `GeneralReg` evaluated as `Type{&lt;:TemplateIdentifier}`</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/okatsn/OkPkgTemplates.jl/blob/1491cde8b7d21ce0a78d3cdfc9d5bec323e36091/src/generatepkg.jl#L57-L66">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="extend/">Extend »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 1 August 2023 00:27">Tuesday 1 August 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
